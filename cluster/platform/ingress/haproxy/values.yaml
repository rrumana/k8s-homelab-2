# HAProxy Technologies Kubernetes Ingress Controller values.
# Chart: haproxytech/kubernetes-ingress

controller:
  kind: Deployment
  replicaCount: 2

  # Enable Gateway API reconciliation (GatewayClass/Gateway/HTTPRoute).
  kubernetesGateway:
    enabled: true
    gatewayControllerName: haproxy.org/gateway-controller

  # Default TLS cert used for SSL offloading when an Ingress does not specify `spec.tls`.
  # This lets us keep a single wildcard cert in `ingress-haproxy` and still serve HTTPS for
  # host-based Ingresses in other namespaces.
  defaultTLSSecret:
    enabled: true
    secretNamespace: ingress-haproxy
    secret: wildcard-k8s-rcrumana-xyz-tls

  service:
    type: LoadBalancer
    annotations:
      metallb.universe.tf/address-pool: default-pool
    # Keep a stable MetalLB IP for split-DNS and Cloudflare records.
    # Note: switching charts changes the Service name; you may need to delete the
    # existing `Service/ingress-haproxy/haproxy-ingress` first to free this IP.
    loadBalancerIP: 192.168.1.230

  affinity:
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              app.kubernetes.io/name: kubernetes-ingress
          topologyKey: kubernetes.io/hostname

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
