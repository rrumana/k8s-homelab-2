# cluster/platform/ingress/haproxy/values.yaml
controller:
  configMap: haproxy-ingress-config

  service:
    type: LoadBalancer
    annotations:
      metallb.universe.tf/address-pool: default-pool
    loadBalancerIP: 192.168.1.230
    externalTrafficPolicy: Local

  affinity:
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              app.kubernetes.io/name: haproxy-ingress
          topologyKey: kubernetes.io/hostname

  config:
    ssl-redirect: "true"
    default-ssl-certificate: "ingress-haproxy/wildcard-k8s-rcrumana-xyz-tls"
    ssl-options: "no-sslv3 no-tlsv10 no-tlsv11"
    ssl-ciphers: "ECDHE+AESGCM:ECDHE+AES256:ECDHE+AES128:!DHE:!RSA:!AES128:!RC4:!DES:!3DES:!MD5:!DSS"
    syslog-endpoint: "stdout"
    syslog-format: "raw"
    syslog-tag: "haproxy"

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  replicaCount: 2

  logs:
    enabled: true
    level: debug

defaultBackend:
  enabled: false

serviceMonitor:
  enabled: true
  namespace: ingress-haproxy
  interval: 30s

